/**
 * Copyright (c) 2019-present Sonatype, Inc.
 * This program and the accompanying materials are made available under
 * the terms of the Eclipse Public License 2.0 which accompanies this
 * distribution and is available at https://www.eclipse.org/legal/epl-2.0/.
 */

// note: the outer calc call below is just necessary to keep sass from getting confused
$nx-page-side-padding: calc(max(((100vw - #{$nx-page-width-max}) / 2), 0px));

/*
  #Layout
*/
.nx-html, .nx-body {
  box-sizing: border-box;
  height: 100%;
}

.nx-body {
  background-color: $nx-site-background-color;
  height: 100%;
  margin: 0;
  // prevents scrollbar flicker as tooltips appear in IE11
  overflow-y: hidden;
  padding: 0;
}

.nx-page {
  @include container-vertical;

  align-items: center;
  display: flex;
  flex-direction: column;
  height: 100%;
  min-width: $nx-page-width-min;
}

.nx-page-content {
  @include container-horizontal;

  box-sizing: border-box;
  display: flex;
  flex-grow: 1;
  justify-content: flex-end;
  overflow-y: hidden;
  padding-left: $nx-page-side-padding;
  width: 100%;
  max-width: $nx-page-width-max;

  // page-load errors are often at this level and not encapsulated within a nx-page-sidebar or nx-page-main
  > .nx-alert {
    align-self: flex-start;
    margin: $nx-spacing-xl auto 0 auto;
  }
}

.nx-page-sidebar {
  @include container-vertical;

  background-color: $nx-sidebar-background-color;
  box-sizing: border-box;
  flex: 1 0 ($nx-page-width-min * $nx-sidebar-proportion - $nx-scrollbar-width);
  max-width: $nx-page-width-max * $nx-sidebar-proportion;
  overflow-x: hidden;
  padding: $nx-spacing-xl $nx-spacing-l $nx-spacing-xs $nx-spacing-l;
  position: relative;
  white-space: normal;
}

.nx-page-main {
  @include container-vertical;

  box-sizing: content-box;
  flex: 1 0 ($nx-page-width-min * $nx-content-proportion - (2 * $nx-spacing-l) - $nx-scrollbar-width);
  overflow-x: hidden;
  overflow-y: auto;
  padding: $nx-spacing-xl calc(#{$nx-page-side-padding} + #{$nx-spacing-l}) $nx-spacing-md $nx-spacing-l;
  white-space: normal;
}

.nx-html--page-scrolling {
  height: auto;
  overflow: auto;

  > .nx-body {
    overflow: visible;
  }

  .nx-page {
    min-width: $nx-page-width-min - $nx-scrollbar-width;
  }

  .nx-page-header {
    position: sticky;
    top: 0;
    left: 0;
    z-index: 1;
  }

  .nx-page-content {
    margin: 0 auto;
    padding: 0;
    justify-content: center;
  }

  .nx-page-main {
    padding-right: $nx-spacing-l;
  }
}
